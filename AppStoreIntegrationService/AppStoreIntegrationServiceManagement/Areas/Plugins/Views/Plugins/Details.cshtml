@inherits CustomRazorPage<ExtendedPluginDetails>
@{
    ViewData["Title"] = "Edit";
    ViewData["ActivePage"] = ManagePluginsNav.PluginDetails;
    ViewData["ActiveSubPage"] = ManagePluginTabs.Details;
}

<partial name="_StatusMessage" model="@TempData["StatusMessage"]" />

<form class="row px-2" onsubmit="return false" id="form">
    <div class="col-12 col-lg-4">
        <partial name="_PluginsNavPartial" model="@Model" />
    </div>

    <div class="col-12 col-lg-8 border-container">
        @if (Model.IsEditMode)
        {
            <partial name="_PluginSubMenu" model="Model.Id" />
        }
        <input readonly hidden name="Page" value="@Page.Details" />

        <partial name="_PluginDetailsPartial" model="@Model" />

        <div class="mb-2">
            @if (Model.IsThirdParty && ExtendedUser.IsInRoles("Developer", "Administrator"))
            {
                <button class="btn pa-admin-success-btn" onclick="SavePlugin('Submit', true)">
                    <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true" hidden></span>
                    Submit
                </button>
                <button class="btn pa-admin-outline-success-btn" onclick="SavePlugin('SaveAsDraft')">
                    <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true" hidden></span>
                    Save as draft
                </button>
            }
            else
            {
                <button class="btn pa-admin-success-btn" onclick="SavePlugin('Save')">
                    <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true" hidden></span>
                    Save
                </button>

                @if (Model.IsEditMode && Model.Status == Status.Active)
                {
                    <button class="btn btn-outline-secondary" onclick="SavePlugin('Deactivate')">
                        <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true" hidden></span>
                        Deactivate
                    </button>
                }

                @if (Model.IsEditMode && Model.Status == Status.Inactive)
                {
                    <button class="btn pa-admin-outline-success-btn" onclick="SavePlugin('Activate')">
                        <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true" hidden></span>
                        Activate
                    </button>
                }
            }
        </div>
    </div>
</form>

<div id="partialContainer"></div>

<script src="~/js/PluginScript.js"></script>
<script src="~/js/DropDown.js"></script>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}